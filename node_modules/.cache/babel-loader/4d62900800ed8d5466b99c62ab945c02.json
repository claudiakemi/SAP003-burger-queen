{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/SAP003-burger-queen/burger-queen/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ubuntu/SAP003-burger-queen/burger-queen/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import firebase from'../../utils/firebaseUtils';import'./styles.css';import Header from'../../components/Header';import Button from'../../components/Button';import{Link}from\"react-router-dom\";function Ready(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState('Em preparo'),_useState4=_slicedToArray(_useState3,2),orderStatus=_useState4[0],setOrderStatus=_useState4[1];useEffect(function(){firebase.firestore().collection('orders').orderBy('timestamp','asc').get().then(function(querySnapshot){var newOrders=querySnapshot.docs.map(function(doc){return _objectSpread({id:doc.id},doc.data());});setOrders(newOrders);});},[]);var productionTime=function productionTime(doc){var timestamp=doc.timestampReady-doc.timestamp;var hours=Math.floor(timestamp/(1000*60*60)%24);var minutes=Math.floor(timestamp/(1000*60)%60);var seconds=Math.floor(timestamp/1000%60);return hours+':'+minutes+':'+seconds;};var orderDelivered=function orderDelivered(doc){firebase.firestore().collection('orders').doc(doc.id).update({orderStatus:'Entregue'}).then(function(){return window.location.reload();});};return React.createElement(\"main\",{id:\"all\"},React.createElement(Header,null),React.createElement(\"hr\",{id:\"line\"}),React.createElement(\"h1\",null,\"Pedidos prontos para entrega\"),React.createElement(\"div\",null,orders.map(function(doc){return doc.orderStatus===\"Pronto\"?React.createElement(\"section\",{id:\"chef-card\"},React.createElement(\"p\",null,React.createElement(\"strong\",null,\"Mesa: \",doc.table,\" - Cliente: \",doc.client,\" - Tempo de espera: \",productionTime(doc))),React.createElement(\"hr\",{id:\"lines\"}),doc.order.map(function(item){return React.createElement(React.Fragment,null,React.createElement(\"p\",null,item.quantity,\" \",item.name,\" \"),React.createElement(\"hr\",{id:\"lines\"}));}),React.createElement(\"div\",{id:\"options-info\"},doc.option!==\"\"?React.createElement(\"p\",{id:\"option\"},doc.option):\"\",doc.extra.length!==0?React.createElement(\"p\",{id:\"extra\"},doc.extra):\"\"),React.createElement(\"p\",null,\"Total: R$\",doc.total,\",00\"),React.createElement(Button,{id:\"entregue\",class:\"btn\",handleClick:function handleClick(){return orderDelivered(doc);},name:\"Pedido entregue\"})):React.createElement(React.Fragment,null);}),React.createElement(Link,{to:\"/pages/Waiter/index\"},React.createElement(Button,{class:\"back\",name:\"Voltar\"}))));}export default Ready;","map":{"version":3,"sources":["/home/ubuntu/SAP003-burger-queen/burger-queen/src/pages/Ready/index.js"],"names":["React","useState","useEffect","firebase","Header","Button","Link","Ready","orders","setOrders","orderStatus","setOrderStatus","firestore","collection","orderBy","get","then","querySnapshot","newOrders","docs","map","doc","id","data","productionTime","timestamp","timestampReady","hours","Math","floor","minutes","seconds","orderDelivered","update","window","location","reload","table","client","order","item","quantity","name","option","extra","length","total"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from '../../utils/firebaseUtils';\nimport './styles.css';\nimport Header from '../../components/Header';\nimport Button from '../../components/Button';\nimport { Link } from \"react-router-dom\";\n\nfunction Ready() {\n  const [orders, setOrders] = useState([]);\n  const [orderStatus, setOrderStatus] = useState('Em preparo')\n\n  useEffect(() => {\n    firebase.firestore()\n    .collection('orders')\n    .orderBy('timestamp', 'asc')\n    .get()\n    .then(\n      querySnapshot => {\n        const newOrders = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data()}))\n          setOrders(newOrders)\n        }\n      )\n    },\n    []\n  );\n\n  const productionTime = (doc) => {\n    const timestamp = doc.timestampReady - doc.timestamp;\n    const hours = Math.floor(((timestamp / (1000*60*60)) % 24));\n    const minutes = Math.floor((timestamp / (1000*60)) % 60);\n    const seconds = Math.floor((timestamp / 1000) % 60 );\n    return hours + ':' + minutes + ':' +  seconds\n  }\n\n  const orderDelivered = (doc) => {\n    firebase.firestore()\n    .collection('orders')\n    .doc(doc.id)\n    .update({\n     orderStatus: 'Entregue'\n    })\n    .then(() =>\n     window.location.reload()\n    )\n  }\n\n  return (\n    <main id=\"all\">\n    <Header />\n    <hr id=\"line\"/>\n    <h1>Pedidos prontos para entrega</h1>\n    <div>\n    {orders.map(doc => (\n      (doc.orderStatus === \"Pronto\")?\n      <section id=\"chef-card\">\n      <p><strong>Mesa: {doc.table} - Cliente: {doc.client} - Tempo de espera: {productionTime(doc)}</strong></p>\n      <hr id=\"lines\"/>\n      {doc.order.map(item => (\n        <>\n        <p>{item.quantity} {item.name} </p>\n        <hr id=\"lines\"/>\n        </>\n      ))}\n      <div id=\"options-info\">\n      {(doc.option !== \"\")? <p id=\"option\">{doc.option}</p> : \"\"}\n      {(doc.extra.length !== 0)? <p id=\"extra\">{doc.extra}</p> : \"\"}\n      </div>\n      <p>Total: R${doc.total},00</p>\n      <Button id=\"entregue\" class=\"btn\" handleClick={() => orderDelivered(doc)} name=\"Pedido entregue\" />\n      </section>\n      : <></>\n    ))}\n    <Link to='/pages/Waiter/index'><Button class=\"back\" name=\"Voltar\"/></Link>\n    </div>\n    </main>\n  )\n}\n\nexport default Ready\n"]},"metadata":{},"sourceType":"module"}