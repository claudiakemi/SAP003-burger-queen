{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/SAP003-burger-queen/burger-queen/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ubuntu/SAP003-burger-queen/burger-queen/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import firebase from'../../utils/firebaseUtils';import'./styles.css';import Header from'../../components/Header';import Button from'../../components/Button';import{Link}from\"react-router-dom\";var timestamp=new Date();function Chef(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState('Em preparo'),_useState4=_slicedToArray(_useState3,2),orderStatus=_useState4[0],setOrderStatus=_useState4[1];useEffect(function(){firebase.firestore().collection('orders').orderBy('timestamp','asc').get().then(function(querySnapshot){var newOrders=querySnapshot.docs.map(function(doc){return _objectSpread({id:doc.id},doc.data());});setOrders(newOrders);});},[]);var orderReady=function orderReady(doc){firebase.firestore().collection('orders').doc(doc.id).update({orderStatus:'Pronto',timestampReady:timestamp}).then(function(){var timeConverted=timestamp.getTime();window.location.reload();});};return React.createElement(\"main\",{id:\"all\"},React.createElement(Header,null),React.createElement(\"hr\",{id:\"line\"}),React.createElement(\"h1\",null,\"Pedidos\"),React.createElement(\"div\",null,orders.map(function(doc){return doc.orderStatus===\"Em preparo\"?React.createElement(\"section\",{id:\"chef-card\"},React.createElement(\"p\",null,React.createElement(\"strong\",null,\"Mesa: \",doc.table,\" - Cliente: \",doc.client,\" - Hor\\xE1rio: \",doc.timestamp)),React.createElement(\"hr\",{id:\"lines\"}),doc.order.map(function(item){return React.createElement(React.Fragment,null,React.createElement(\"p\",null,item.quantity,\" \",item.name,\" \"),React.createElement(\"hr\",{id:\"lines\"}));}),React.createElement(\"div\",{id:\"options-info\"},doc.option!==\"\"?React.createElement(\"p\",{id:\"option\"},doc.option):\"\",doc.extra.length!==0?React.createElement(\"p\",{id:\"extra\"},doc.extra):\"\"),React.createElement(\"p\",null,\"Total: R$\",doc.total,\",00\"),React.createElement(Button,{id:\"pronto\",class:\"btn\",handleClick:function handleClick(){return orderReady(doc);},name:\"Pedido pronto\"})):React.createElement(React.Fragment,null);}),React.createElement(Link,{to:\"/\"},React.createElement(Button,{class:\"back\",name:\"Voltar\"}))));}export default Chef;","map":{"version":3,"sources":["/home/ubuntu/SAP003-burger-queen/burger-queen/src/pages/Chef/index.js"],"names":["React","useState","useEffect","firebase","Header","Button","Link","timestamp","Date","Chef","orders","setOrders","orderStatus","setOrderStatus","firestore","collection","orderBy","get","then","querySnapshot","newOrders","docs","map","doc","id","data","orderReady","update","timestampReady","timeConverted","getTime","window","location","reload","table","client","order","item","quantity","name","option","extra","length","total"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from '../../utils/firebaseUtils';\nimport './styles.css';\nimport Header from '../../components/Header';\nimport Button from '../../components/Button';\nimport { Link } from \"react-router-dom\";\nlet timestamp = new Date();\n\nfunction Chef () {\n  const [orders, setOrders] = useState([]);\n  const [orderStatus, setOrderStatus] = useState('Em preparo')\n\n  useEffect(() => {\n    firebase.firestore()\n    .collection('orders')\n    .orderBy('timestamp', 'asc')\n    .get()\n    .then(\n      querySnapshot => {\n        const newOrders = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data()}))\n          setOrders(newOrders)\n        }\n      )\n    },\n    []\n  );\n\nconst orderReady = (doc) => {\n  firebase.firestore()\n  .collection('orders')\n  .doc(doc.id)\n  .update({\n   orderStatus: 'Pronto',\n   timestampReady: timestamp\n  })\n  .then(() => {\n    let timeConverted = timestamp.getTime();\n    window.location.reload();\n  }\n  )\n}\n\n  return(\n    <main id=\"all\">\n    <Header />\n    <hr id=\"line\"/>\n    <h1>Pedidos</h1>\n    <div>\n    {orders.map(doc => (\n      (doc.orderStatus === \"Em preparo\")?\n      <section id=\"chef-card\">\n      <p><strong>Mesa: {doc.table} - Cliente: {doc.client} - Hor√°rio: {doc.timestamp}</strong></p>\n      <hr id=\"lines\"/>\n      {doc.order.map(item => (\n        <>\n        <p>{item.quantity} {item.name} </p>\n        <hr id=\"lines\"/>\n        </>\n      ))}\n      <div id=\"options-info\">\n      {(doc.option !== \"\")? <p id=\"option\">{doc.option}</p> : \"\"}\n      {(doc.extra.length !== 0)? <p id=\"extra\">{doc.extra}</p> : \"\"}\n      </div>\n      <p>Total: R${doc.total},00</p>\n      <Button id=\"pronto\" class=\"btn\" handleClick={() => orderReady(doc)} name=\"Pedido pronto\" />\n      </section>\n      : <></>\n    ))}\n    <Link to='/'><Button class=\"back\" name=\"Voltar\"/></Link>\n    </div>\n    </main>\n  )\n}\n\nexport default Chef\n"]},"metadata":{},"sourceType":"module"}